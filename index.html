<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>transvolve.js by joechimo</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>transvolve.js</h1>
        <h2>The ECS engine that you can react to.</h2>

        <section id="downloads">
          <a href="https://github.com/joechimo/transvolve/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/joechimo/transvolve/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/joechimo/transvolve" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <p><a href="https://npmjs.org/packages/transvolve"><img src="https://badge.fury.io/js/transvolve.svg" alt="NPM Version"></a> <a href="https://travis-ci.org/joechimo/transvolve"><img src="https://travis-ci.org/joechimo/transvolve.svg?branch=master" alt="Build Status"></a> <a href="https://coveralls.io/github/joechimo/transvolve"><img src="https://coveralls.io/repos/github/joechimo/transvolve/badge.svg?branch=master" alt="Coverage Status"></a></p>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Started</h2>

<p>These instructions will get you a copy of the project up and running on your local machine for development and testing purposes. See deployment for notes on how to deploy the project on a live system.</p>

<h3>
<a id="installing" class="anchor" href="#installing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installing</h3>

<p>Getting all set up is easy.</p>

<p>First, install the npm package to you project.</p>

<pre><code>npm install transvolve
</code></pre>

<p>Then, go ahead and import it into your code and run.</p>

<pre><code>import { Engine } from 'transvolve';

const engine = new Engine();
</code></pre>

<p>Take a gander at the <a href="https://joechimo.github.io/transvolve/">transvolve.js</a> GitHub Page and the <a href="https://joechimo.github.io/transvolve/docs/">API Documentation</a>.</p>

<h2>
<a id="running-the-tests" class="anchor" href="#running-the-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Running the tests</h2>

<p>Test can be ran using:</p>

<pre><code>npm run test
</code></pre>

<h2>
<a id="example-code-that-demonstrates-the-engine" class="anchor" href="#example-code-that-demonstrates-the-engine" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example code that demonstrates the engine</h2>

<pre><code>   var transvolve = require('transvolve');
   var Engine = transvolve.Engine;
   var System = transvolve.System;
   var Entity = transvolve.Entity;
   var Component = transvolve.Component;

   function random(min, max) {
     var MIN = Math.ceil(min);
     var MAX = Math.floor(max);
     return Math.floor(Math.random() * (MAX - MIN)) + MIN;
   }

   var engine = new Engine();

   function onTick() {
     var entity = new Entity();
     var healthComponent = new Component('health', { hp: 100 });
     var decayComponent = new Component('decay');

     entity.addComponents(healthComponent, decayComponent);
     engine.addEntities(entity);
   }

   var decaySystem = new System({
     name: 'decay',
     requirements: ['decay'],
     interval: 100,
     executor: (context) =&gt; {
       var entity = context.entity;

       var timer = entity.getComponents('decay').getState('timer');
       timer = timer - context.time.delta;

       if (timer &gt; 0) {
         entity.getComponents('decay').setState('timer', timer);
       } else {
         var hp = entity.getComponents('health').getState('hp');
         var loss = random(0, 100);

         hp = (hp - loss) &gt; 0 ? hp - loss : 0;
         entity.getComponents('health').setState('hp', hp);

         if (hp === 0) {
           if (random(0, 100) &gt;= 50) {
             entity.removeComponents('decay');
             entity.addComponents(new Component('death', { timer: 5000 }));
             console.log(entity.getId() + ' has perished.');
           } else {
             entity.dispose();
           }
         } else {
           entity.getComponents('decay').setState('timer', 1000);
         }
       }
     },
   });

   var resurrectSystem = new System({
     name: 'resurrect',
     requirements: ['death'],
     interval: 1000,
     executor: (context) =&gt; {
       var entity = context.entity;
       var timer = entity.getComponents('death').getState('timer');
       timer = timer - context.time.delta;

       if (timer &lt;= 0) {
         entity.removeComponents('death');
         entity.getComponents('health').setState('hp', 100);
         entity.addComponents(new Component('decay', { timer: 1000 }));
         console.log(entity.getId() + ' has revived.');
       } else {
         entity.getComponents('death').setState('timer', timer);
       }
     },
   });

   engine.addSystems(decaySystem, resurrectSystem);
   engine.subscribe('tick', onTick);

   engine.init()
     .then(() =&gt; {
       engine.start();
     });
</code></pre>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributing</h2>

<p>Please read <a href="https://gist.github.com/PurpleBooth/b24679402957c63ec426">CONTRIBUTING.md</a> for details on our code of conduct, and the process for submitting pull requests to us.</p>

<h2>
<a id="versioning" class="anchor" href="#versioning" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Versioning</h2>

<p>We use <a href="http://semver.org/">SemVer</a> for versioning. For the versions available, see the <a href="https://github.com/joechimo/transvolve/tags">tags on this repository</a>. </p>

<h2>
<a id="authors" class="anchor" href="#authors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authors</h2>

<ul>
<li>
<strong>Joe Cimaszewski</strong> - <em>Initial work</em> - <a href="https://github.com/joechimo">joechimo</a>
</li>
</ul>

<p>See also the list of <a href="https://github.com/joechimo/transvolve/contributors">contributors</a> who participated in this project.</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h2>

<p>This project is licensed under the MIT License - see the <a href="LICENSE.md">LICENSE.md</a> file for details</p>

<h2>
<a id="acknowledgments" class="anchor" href="#acknowledgments" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Acknowledgments</h2>

<ul>
<li>Just me, right now.</li>
</ul>
      </section>
    </div>

    
  </body>
</html>
